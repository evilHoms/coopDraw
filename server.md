# Необходимый функционал серверной части

1. При открытии страницы отправляется GET запрос. Нужно ответить списком комнат с ключами:

  * "roomId": генерируемый, при создании комнаты, уникальный id комнаты
  * "host": имя хоста
  * "guests": количество гостей.

2. При создании новой комнаты отправляется POST запрос с именем хоста, сгенерированным уникальным id и паролем. Данные о новой комнате ("host", "users" в виде массива с одним элементом в виде хоста, "roomId", "password") добавляются в список комнат. В ответе присылаются данные о созданной комнате("roomId", "host", "users", "password"). По умолчанию может вносить изменения на холсте(ableToDraw = true)

3. При подключении к уже существующей комнате отправляется POST запрос с именем гостя, и при наличии, паролем. При совпадении веденного пароля с паролем комнаты, необходимо добавить веденное имя гостя в "users" данной комнаты. В ответе присылаются данные о комнате: "host", "users", "roomId". Так же у нового гостя по умочанию нет права вносить изменения на холсте(ableToDraw = false)

Данные о комнатах на сервере могу храниться в виде массива объектов:

`    

    [
      { 
        "roomId": id1,
        "host": host1,
        "password": 123,
        "users": [
          {
            "name": host1,
            "ableToDraw": true
          },
          {
            "name": guest1,
            "ableToDraw": false
          },
          {
            "name": guest2,
            "ableToDraw": false
          }
        ] 
      },
      { 
        "roomId": id2,
        "host": host2,
        "password": qwe,
        "users": [
          {
            "name": host2,
            "ableToDraw": true
          },
          {
            "name": guest1,
            "ableToDraw": false
          },
          {
            "name": guest2,
            "ableToDraw": false
          }
        ]
      }
    ]
    
`

4. После получения ответа от сервера, при создании либо подключении к комнате, открывается WebSocket соединение. Пользователю отсылается png (изображение уже нарисованное на холсте к моменту подключения).

5. Хост может изменить права на рисование для конкретного гостя, для этого отправляется id комнаты c именем пользователя. Поле ableToDraw для данного пользователя переключается.

6. Хост может выгнать гостя из комнаты, для этого отправляется id комнаты c именем пользователя. Пользователь с переданном именем в конкретной комнате из нее удаляется.

7. При внесении изменений на холсте, данные, преобразуются в png и передаются через ws, его необходимо поместить в поле для изображения c id данной комнаты.

8. Пользователи по ws, получают от сервера изображение холста данной комнаты. Так же передается объект комнаты, для отслеживания изменений прав пользователя и участников в комнате.

9. При удалении комнаты хостом, либо при выходе последнего участника, при закрытии последнего ws соединения, данные о комнате и холсте из списков удаляются.